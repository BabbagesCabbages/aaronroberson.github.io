<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Day 7 - Shopping Cart Part 1</title>
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.">
    <link rel='shortcut icon' type='image/x-icon' href='/favicon.ico' />
    <link rel="canonical" href="http://aaronroberson.github.io/geekwise/day-7-shopping-cart-part-1/">

    <!-- Custom CSS -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/assets/styles/aaronroberson.css">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="//oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="//oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>


    <body>

    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Pixel Polished</a>
        </div>
        <div class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li><a href="/">Home</a></li>
                
                    
                        
                        <li><a href="/about/">About</a></li>
                        
                    
                
                    
                        
                    
                
                    
                        
                    
                
                    
                        
                    
                
                    
                        
                    
                
                    
                        
                    
                
                    
                        
                    
                
                    
                        
                    
                
                    
                        
                    
                
                    
                        
                    
                
                    
                        
                    
                
                    
                
                    
                
                    
                        
                    
                
                    
                
            </ul>
            <ul class="nav navbar-right navbar-nav">
                <li class="dropdown">
                    <a href="/geekwise/" class="dropdown-toggle" data-toggle="dropdown">Geekwise <span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <li><a href="/geekwise/">Course overview</a></li>
        
    
        
    

    
        
    
        
            <li><a href="/geekwise/day-1-javascript-objects/">Day 1 - JavaScript Objects</a></li>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    

    
        
    
        
    
        
    
        
            <li><a href="/geekwise/day-2-intro-to-angularjs/">Day 2 - Intro to AngularJS</a></li>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    

    
        
    
        
    
        
    
        
    
        
            <li><a href="/geekwise/day-3-get-your-swag-on/">Day 3 - Get your swagger on!</a></li>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    

    
        
    
        
    
        
    
        
    
        
    
        
            <li><a href="/geekwise/day-4-product-listing/">Day 4 - Product Listing</a></li>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    

    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <li><a href="/geekwise/day-5-getting-mean/">Day 5 - Getting MEAN</a></li>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    

    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <li><a href="/geekwise/day-6-directives/">Day 6 - Directives</a></li>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    

    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <li><a href="/geekwise/day-7-shopping-cart-part-1/">Day 7 - Shopping Cart Part 1</a></li>
        
    
        
    
        
    
        
    
        
    
        
    
        
    

    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <li><a href="/geekwise/day-8-shopping-cart-part-2/">Day 8 - Shopping Cart Part 2</a></li>
        
    
        
    
        
    
        
    
        
    
        
    

                    </ul>
                </li>
            </ul>
        </div><!--/.nav-collapse -->
    </div>
</nav>

    <div class="container">

        <header class="masthead">
    <div class="container">
        <div class="row">
            <div class="col col-sm-12">
                <div class="social">
                    <div class="rounded center icon-share"></div>
                    <div class="share-container rounded">
                        <a class="share-btn tl icon-google-plus" href='https://plus.google.com/+AaronRoberson'></a>
                        <a class="share-btn tr icon-twitter" href='https://twitter.com/aaronroberson'></a>
                        <a class="share-btn bl icon-github" href='https://github.com/aaronroberson'></a>
                        <a class="share-btn br icon-linkedin" href='https://linkedin.com/in/aaronrobes'></a>
                    </div>
                </div>â€‹
                <h1><a href="/">Aaron Roberson</a>
                    <p class="lead text-muted">Thickheaded about thick front-end development</p></h1>
            </div>
        </div>
    </div>
</header>

        <div class="row">
            <div class="col col-sm-9">
    
    <section class="post">
        <h1>Day 7 - Shopping Cart Part 1</h1>

<p>In tonight's class you will be:</p>

<ul>
    <li>Creating Shopping Cart
        <ul>
            <li>Create a cart service</li>
            <li>Create a cart controller</li>
            <li>Add the CartController to the cart state</li>
            <li>Update the cart.html view</li>
        </ul>
    </li>
</ul>

<h2>Cart Service</h2>

<p>Services are the ideal place for encapsulating business logic, formatting data and performing calculations prior to presenting them in the view.</p>

<p>Add a CartService to the services.js file:</p>

<script src="https://gist.github.com/aaronroberson/a26f85400a3e8818a834.js?file=cart-service.js"> </script>

<h3>Updating the addItem method</h3>

<p>The addItem method will take an item as a parameter and will check for the existence of the item in the <code>items</code> object.
    If the item doesn't exist, add a <code>quantity</code> property and initialize it with the value of 1.
    Then, add the item to the <code>items</code> object, using the <code>id</code> as its key:</p>
<pre class="prettyprint lang-javascript">
if(!items[item.id]) {
item.quantity = 1;
items[item.id] = item;
}
</pre>

<p>If the item already exists in the <code>items</code> object, increment the quantity property by 1:</p>
<pre class="prettyprint lang-javascript">
else {
items[item.id].quantity += 1;
}
</pre>
<h3>Updating the removeItem method</h3>

<p>The removeItem method will use the built-in Javascript keyword <code>delete</code> to remove the item from the <code>items</code> object:</p>

<pre class="prettyprint lang-javascript">
removeItem: function(id) {
delete items[id];
},
</pre>

<h3>Updating the emptyCart method</h3>

<p>The emptyCart method overrides the <code>items</code> object with an empty object:</p>

<pre class="prettyprint lang-javascript">
emptyCart: function() {
items = {};
},
</pre>

<h3>Updating the getItemCount method</h3>

<p>The getItemCount method returns the total quantity of items in the <code>items</code> object.
    Be careful to use the built-in JavaScript <code>parseInt()</code> function to convert strings to numbers:</p>

<pre class="prettyprint lang-javascript">
getItemCount: function() {
var total = 0;
angular.forEach(items, function(item) {
    total += parseInt(item.quantity);
});
return total;
}
</pre>

<h3>Updating the getCartSubtotal method</h3>

<p>The getCartSubtotal method returns the quantity of items multiplied by the item price or specialPrice (if specialPrice property exists).
    Once again, be sure to use the <code>parseInt()</code> function to ensure that the item quantity is an integer and not a string.
    In addition, use the built-in <code>parseFloat()</code> function to ensure that the item price is a double integer:
</p>

<pre class="prettyprint lang-javascript">
getCartSubtotal: function() {
var total = 0;
angular.forEach(items, function(item) {
   total += parseInt(item.quantity) * parseFloat(item.specialPrice || item.price);
});
return total;
},
</pre>

<h2>Cart Controller</h2>

<p>Add a CartController to the controllers.js file:</p>

<script src="https://gist.github.com/aaronroberson/a26f85400a3e8818a834.js?file=cart-controller.js"> </script>

<p>Inject the CartService into the CartController using Angular's built-in dependency injection annotation.
    Then, using the getItems() method, set the items from the CartService in a variable named <code>items</code> on the $scope:
</p>
<pre class="prettyprint lang-javascript">
...
$scope.items = CartService.getItems();
...
</pre>

<p>Next, update each function (addItem, getItemCount, getCartSubtotal, getCartTotal, removeItem, emptyCart and checkout) to invoke the corresponding methods in the CartService. For example:</p>

<pre class="prettyprint lang-javascript">
...
$scope.addItem = function(item) {
// Pass the item into the addItem method of the CartService
CartService.addItem(item);
};
...
</pre>

<p>By design, the controller is very thin, meaning that it is devoid of complex business logic.
    Adding application business logic in the controller is an anti-pattern for several reasons:</p>

<ul>
    <li>Controllers are transient objects, meaning they are created and destroyed frequently</li>
    <li>Controllers are not shared throughout the application, and neither is the code they contain</li>
    <li>Complex controller logic is not easily testable</li>
</ul>

<p>In your applications, aim to make your controllers "anemic", with the sole responsibility of marshalling data from the services and to the view.
    Add the CartController to the 'cart' state of the 'states.js' file.</p>

<div class="alert alert-info">
    <p>Be sure to commit your changes to Github!</p>
</div>

<p><a ui-sref="geek.page({page_id: 8})" class="btn btn-default">Continue to Day 8</a></p>

<div disqus="'geekwise0107'"></div>

    </section>

    <div id="disqus_thread" class="comments"></div>
</div>

<div class="col col-sm-3">
    <div id="sidebar" class="sidebar">

        <h3>Schedule</h3>
        <ul class="nav nav-list">
            
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <li><a href="/geekwise/">Course overview</a></li>
        
    
        
    

    
        
    
        
            <li><a href="/geekwise/day-1-javascript-objects/">Day 1 - JavaScript Objects</a></li>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    

    
        
    
        
    
        
    
        
            <li><a href="/geekwise/day-2-intro-to-angularjs/">Day 2 - Intro to AngularJS</a></li>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    

    
        
    
        
    
        
    
        
    
        
            <li><a href="/geekwise/day-3-get-your-swag-on/">Day 3 - Get your swagger on!</a></li>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    

    
        
    
        
    
        
    
        
    
        
    
        
            <li><a href="/geekwise/day-4-product-listing/">Day 4 - Product Listing</a></li>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    

    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <li><a href="/geekwise/day-5-getting-mean/">Day 5 - Getting MEAN</a></li>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    

    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <li><a href="/geekwise/day-6-directives/">Day 6 - Directives</a></li>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    

    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <li><a href="/geekwise/day-7-shopping-cart-part-1/">Day 7 - Shopping Cart Part 1</a></li>
        
    
        
    
        
    
        
    
        
    
        
    
        
    

    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <li><a href="/geekwise/day-8-shopping-cart-part-2/">Day 8 - Shopping Cart Part 2</a></li>
        
    
        
    
        
    
        
    
        
    
        
    

        </ul>

    </div>
</div>


<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'pixelpolished'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

        </div>
    </div>

    <footer class="footer">
    <div class="container">
        <span class="text-muted">&copy; 2014 Aaron Roberson. All rights reserved.</span>
        <a class="btn btn-linkedin" href="https://linkedin.com/in/aaronrobes" title="LinkedIn">
            <i class="fa fa-linkedin"></i>
        </a>
        <a class="btn btn-google-plus" href="" title="Google+">
            <i class="fa fa-google-plus"></i>
        </a>
        <a class="btn btn-twitter" href="https://twitter.com/aaronroberson" title="Twitter">
            <i class="fa fa-twitter"></i>
        </a>
        <a class="btn btn-github" href="https://github.com/aaronroberson" title="GitHub">
            <i class="fa fa-github"></i>
        </a>
    </div>
</footer>


    <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function(){
            $('#sidebar').affix({
                offset: {
                    top: 180
                }
            });
        });
        window.analytics=window.analytics||[],window.analytics.methods=["identify","group","track","page","pageview","alias","ready","on","once","off","trackLink","trackForm","trackClick","trackSubmit"],window.analytics.factory=function(t){return function(){var a=Array.prototype.slice.call(arguments);return a.unshift(t),window.analytics.push(a),window.analytics}};for(var i=0;i<window.analytics.methods.length;i++){var key=window.analytics.methods[i];window.analytics[key]=window.analytics.factory(key)}window.analytics.load=function(t){if(!document.getElementById("analytics-js")){var a=document.createElement("script");a.type="text/javascript",a.id="analytics-js",a.async=!0,a.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.io/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n)}},window.analytics.SNIPPET_VERSION="2.0.9",
                window.analytics.load("kqe985dobm");
        window.analytics.page();
    </script>
    </body>
</html>